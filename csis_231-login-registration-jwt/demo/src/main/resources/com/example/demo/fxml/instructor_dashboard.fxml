<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.demo.instructor.InstructorDashboardController"
            prefWidth="1280" prefHeight="800"
            styleClass="glass-pane">
    <top>
        <HBox spacing="16" alignment="CENTER_LEFT" styleClass="topbar">
            <children>
                <Label text="ðŸŽ“ Instructor" styleClass="toolbar-title-large"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="welcomeLabel" text="Welcome" styleClass="stat-label"/>
                <Button fx:id="analyticsButton" text="3D Analytics" onAction="#onOpenAnalytics" styleClass="secondary-button" visible="false" managed="false"/>
                <Button text="Course Catalog" onAction="#onOpenCatalog" styleClass="ghost-button"/>
                <Button text="Logout" onAction="#onLogout" styleClass="ghost-button"/>
            </children>
            <padding><Insets top="16" bottom="16" left="24" right="24"/></padding>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="content-scroll">
            <content>
                <VBox spacing="24" styleClass="page-section">
                    <children>

                        <Label text="Dashboard Overview" styleClass="title-label"/>

                        <HBox spacing="16">
                            <VBox spacing="10" styleClass="card" HBox.hgrow="ALWAYS">
                                <Label text="ðŸ“š Courses" styleClass="card-heading"/>
                                <Label fx:id="courseCountLabel" text="0" styleClass="stat-value"/>
                                <Label text="Total authored courses" styleClass="muted"/>
                            </VBox>
                            <VBox spacing="10" styleClass="card" HBox.hgrow="ALWAYS">
                                <Label text="ðŸ‘¥ Enrollments" styleClass="card-heading"/>
                                <Label fx:id="enrollmentCountLabel" text="0" styleClass="stat-value"/>
                                <Label text="Students across your courses" styleClass="muted"/>
                            </VBox>
                            <VBox spacing="10" styleClass="card" HBox.hgrow="ALWAYS">
                                <Label text="ðŸ†• Latest Course" styleClass="card-heading"/>
                                <Label fx:id="lastCourseLabel" text="â€”" styleClass="stat-label"/>
                                <Label text="Most recently created" styleClass="muted"/>
                            </VBox>
                        </HBox>

                        <VBox spacing="12" styleClass="management-card">
                            <children>
                                <HBox spacing="12" alignment="CENTER_LEFT">
                                    <children>
                                        <Label text="Your Courses" styleClass="title-label"/>
                                        <Region HBox.hgrow="ALWAYS"/>
                                        <Button text="View Enrollments" onAction="#onViewEnrollments" styleClass="ghost-button"/>
                                        <Button text="New Course" onAction="#onCreateCourse" styleClass="primary-button"/>
                                    </children>
                                </HBox>

                                <TableView fx:id="courseTable" prefHeight="520">
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                    <columns>
                                        <TableColumn fx:id="titleColumn" text="Title" prefWidth="280"/>
                                        <TableColumn fx:id="publishedColumn" text="Status" prefWidth="120"/>
                                        <TableColumn fx:id="createdColumn" text="Created" prefWidth="200"/>
                                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="220"/>
                                    </columns>
                                    <placeholder><Label text="No courses yet"/></placeholder>
                                </TableView>

                                <Label text="Enrolled Students" styleClass="title-label"/>
                                <TableView fx:id="enrollmentTable" prefHeight="220">
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                    <columns>
                                        <TableColumn fx:id="enrollStudentColumn" text="Student" prefWidth="200"/>
                                        <TableColumn fx:id="enrollEmailColumn" text="Email" prefWidth="220"/>
                                        <TableColumn fx:id="enrollStatusColumn" text="Status" prefWidth="120"/>
                                        <TableColumn fx:id="enrollDateColumn" text="Enrolled At" prefWidth="180"/>
                                    </columns>
                                    <placeholder><Label text="Select a course to view enrollments"/></placeholder>
                                </TableView>

                                <Label text="My Enrolled Courses" styleClass="title-label"/>
                                <TableView fx:id="myEnrollmentTable" prefHeight="220">
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                    <columns>
                                        <TableColumn fx:id="myCourseTitleColumn" text="Course" prefWidth="260"/>
                                        <TableColumn fx:id="myCourseStatusColumn" text="Status" prefWidth="140"/>
                                        <TableColumn fx:id="myCourseEnrolledAtColumn" text="Enrolled At" prefWidth="200"/>
                                        <TableColumn fx:id="myCourseActionColumn" text="Action" prefWidth="140"/>
                                    </columns>
                                    <placeholder><Label text="You are not enrolled in any courses"/></placeholder>
                                </TableView>

                                <Label text="Upcoming Quizzes" styleClass="title-label"/>
                                <TableView fx:id="upcomingQuizTable" prefHeight="220">
                                    <columnResizePolicy>
                                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                                    </columnResizePolicy>
                                    <columns>
                                        <TableColumn fx:id="upcomingCourseColumn" text="Course" prefWidth="260"/>
                                        <TableColumn fx:id="upcomingQuizNameColumn" text="Quiz" prefWidth="200"/>
                                        <TableColumn fx:id="upcomingQuizQuestionsColumn" text="Questions" prefWidth="120"/>
                                        <TableColumn fx:id="upcomingQuizActionColumn" text="Action" prefWidth="140"/>
                                    </columns>
                                    <placeholder><Label text="No pending quizzes"/></placeholder>
                                </TableView>
                            </children>
                        </VBox>

                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
